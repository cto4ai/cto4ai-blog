---
description: "Complete guide for authoring MDX content in the CTO4.AI Astro blog including frontmatter, images, components, and linking best practices."
globs: ["*.mdx", "*.md"]
alwaysApply: false
---

# MDX Content Authoring for CTO4.AI Astro Blog

**Task**: Create and edit MDX content for the CTO4.AI blog with proper structure, images, and formatting.

## Creating a New Post
- Pick a slug based on guidance from user in creation request, such as post title
  - Keep the slug a reasonable size
    - Too long "chroma-rag-is-dead-long-live-context-engineering"
    - OK "chroma-context-engineering"
- Scaffold directory structure
  - Post directory based on slug
  - Parallel image directory
  - Social media directory structure
  - Transcripts directory for AI conversation exports
- Create index.mdx with:
  - Front matter (all fields)
    - Set date correctly per guidelines below
    - Draft: true
  - Required component imports

- Follow detailed guidelines below

## Content File Structure

### File Location
- **Content Path**: `/src/data/content/[slug]/index.mdx`
- **Slug Format**: URL-friendly (lowercase, hyphens, no spaces)
- **Example**: `/src/data/content/my-awesome-post/index.mdx`
- **Transcripts Path**: `/src/data/content/[slug]/transcripts/` (for AI conversation exports)
- **Embedded Content Path**: `/src/data/content/[slug]/embedded/` (for external Markdown files)

### Image Storage
- **Image Path**: `/src/assets/images/content/[slug]/`
- **Must match post slug**: Images for `my-awesome-post` go in `/src/assets/images/content/my-awesome-post/`
- **Supported formats**: `.png`, `.jpg`, `.jpeg`, `.webp`, `.svg`

## Required Frontmatter

```yaml
---
title: "Your Post Title Here"
contentType: "essay"  # Options: essay, brief, elsewhere, quote, episode
description: "Brief description for SEO and social sharing"
author: "Jack Ivers"
publishDate: "2025-08-11T10:00:00-05:00"  # ISO 8601 with timezone. At creation, insert the current date-time less 2 hours (two hours ago).
image: "~/assets/images/content/[slug]/cover-image.png"  # Cover image path (optional)
featured: false  # Featured on homepage. Optional.
draft: true  # Set to false when publishing
tags: ["tag1", "tag2"]  # Optional
categories: ["category1"]  # Optional
---
```

### Content Type Options
- `essay`: Long-form articles (1000+ words)
- `brief`: Short-form content (under 1000 words)
- `elsewhere`: Curated external content with commentary
- `quote`: Quote posts with attribution
- `episode`: Podcast or video episode commentary 

### Date Format
- Use ISO 8601: `YYYY-MM-DDTHH:MM:SS-ZZ:ZZ`
- Example: `2025-08-11T14:30:00-05:00` (Central Time)
- Always include timezone offset
- At creation, use the shell `date` command to get the actual current date time - then insert the current date-time less 2 hours (two hours ago).

## Image Components

### Import Required Components
Place at the top of your MDX file after frontmatter:

```jsx
import SingleImage from '~/components/ui/SingleImage.astro';
import ImageGallery from '~/components/ui/ImageGallery.astro';
import ChatTranscript from '~/components/ui/ChatTranscript.astro';  // For AI conversation transcripts
import MDContent from '~/components/ui/MDContent.astro';  // For embedding external Markdown content
```

### SingleImage Usage
For individual images with lightbox support:

```jsx
<SingleImage 
  src="image-filename.png" 
  alt="Descriptive alt text for accessibility" 
  size="2xl" 
  postDir="your-post-slug" 
/>
```

**Size Options**: `xs`, `sm`, `md`, `lg`, `xl`, `2xl`, `3xl`, `4xl`, `5xl`, `6xl`, `full`

### ImageGallery Usage
For multiple images in a grid:

```jsx
<ImageGallery 
  images={["image1.png", "image2.jpg", "image3.webp"]} 
  postDir="your-post-slug" 
  size="xl" 
/>
```

### ChatTranscript Usage
For displaying AI conversation transcripts:

```jsx
<ChatTranscript 
  transcript={transcriptVariable} 
  theme="adium" 
  maxHeight="600px" 
  toolName="Claude Code" 
/>
```

**Transcript Variable**: Import from a TypeScript file in your `transcripts/` directory:
```jsx
import { myConversation } from './transcripts/claude-code';
// Then use: transcript={myConversation}
```

**Theme Options**: `adium`, `minimal`, `modern`, `compact`
**Optional Props**: 
- `toolName`: Override auto-detected AI tool name
- `maxHeight`: Container height (e.g., '600px') for scrollable transcripts
- `showTimestamps`: Display message timestamps (default: false)
- `showAvatars`: Show user/AI avatars (default: true)

### MDContent Usage
For embedding external Markdown files with styled sections:

```jsx
// First, import the Markdown file's Content
import { Content as Part1Content } from './embedded/part1.md';

// Then use MDContent to display it
<MDContent 
  title="Section Title" 
  Content={Part1Content}
  description="Optional description for this section"
  className="custom-classes" 
/>
```

**Props**:
- `title` (required): Section heading
- `Content` (required): The imported Content component from a Markdown file
- `description` (optional): Subtitle or description text
- `className` (optional): Additional CSS classes

## Hyperlinking

### External Links
Standard markdown syntax:
```markdown
[Link Text](https://example.com)
```

### Internal Blog Links
Use relative paths:
```markdown
[My other post](/p/other-post-slug)
[Posts by tag](/tag/ai)
[Posts by category](/category/technology)
```

### Footnotes
MDX supports footnotes:
```markdown
This needs a citation[^1].

[^1]: This is the footnote content.
```

## Markdown Embedding Patterns

### Embedding External Markdown Files
You can embed external Markdown files into your MDX content using several approaches:

#### 1. Direct Import from Embedded Directory (Recommended)
For post-specific content sections:
```jsx
import { Content as SectionContent } from './embedded/section.md';

<MDContent 
  title="My Section" 
  Content={SectionContent}
  description="Description of this section"
/>
```

#### 2. Root Import for Site-Wide Content
For shared content like privacy policies:
```jsx
import { Content as Privacy } from '~/privacy-policy.md';

<Privacy />
```

#### 3. Multiple Sections Pattern
For complex posts with multiple embedded sections:
```jsx
import { Content as Part1 } from './embedded/part1.md';
import { Content as Part2 } from './embedded/part2.md';
import { Content as Appendix } from './embedded/appendix.md';

// In your content:
<MDContent title="Part 1: Introduction" Content={Part1} />
<MDContent title="Part 2: Deep Dive" Content={Part2} />
<MDContent title="Appendix" Content={Appendix} />
```

### Important Routing Notes
- Content files in `/src/data/content/` are NOT directly accessible as URLs
- They are processed by the blog system and rendered at `/p/[slug]`
- Only files in `/src/pages/` become routable pages
- The permalink pattern `/p/%slug%` is applied to all blog posts

## MDX-Specific Features

### Component Imports
You can import and use React/Astro components:
```jsx
import CustomComponent from '~/components/CustomComponent.astro';

<CustomComponent prop="value" />
```

### Inline JSX
You can use JSX directly in MDX:
```jsx
<div className="custom-class">
  Custom HTML content
</div>
```

## Best Practices

### Named Entity Linking
- Not part of unitial creation
- See separate rule .cursor/rules/named-entity-linking.mdc

### Images
- **Always provide alt text** for accessibility
- Use descriptive filenames (not IMG_1234.jpg)
- Optimize images before upload (compress, appropriate dimensions)
- Cover image should be 1200x628px minimum for social sharing
- Use `postDir` parameter matching your post's slug

### Content Organization
- Start with compelling introduction
- Use headers (##, ###) for structure
- Break up long text with images, lists, or quotes
- End with clear conclusion or call-to-action

### SEO & Discoverability
- Write descriptive titles (60 chars or less ideal)
- Create compelling descriptions (155 chars or less)
- Use relevant tags (3-5 per post)
- Choose appropriate category (usually just one)

### Draft Management
- Set `draft: true` while writing
- Test with `npm run dev` before publishing
- Change to `draft: false` only when ready to publish
- Remember drafts won't appear in production builds

## Steps to Create a New Post

### 1. Create Directory Structure
For a new post with slug `my-new-post`:

```bash
# Create content directory and file
mkdir -p src/data/content/my-new-post
touch src/data/content/my-new-post/index.mdx

# Create parallel images directory
mkdir -p src/assets/images/content/my-new-post

# Create transcripts directory for AI conversation exports
mkdir -p src/data/content/my-new-post/transcripts

# Create embedded directory for external Markdown files
mkdir -p src/data/content/my-new-post/embedded

# Create social media scaffolding (for social content authoring)
mkdir -p src/data/content/my-new-post/socialposts/images
mkdir -p src/data/content/my-new-post/socialposts/linkedin
mkdir -p src/data/content/my-new-post/socialposts/mastodon
touch src/data/content/my-new-post/socialposts/linkedin/post.txt
touch src/data/content/my-new-post/socialposts/mastodon/post.txt
```

### 2. Add Frontmatter to index.mdx
Start with the required frontmatter template (see Required Frontmatter section above).
**IMPORTANT**: Always set `draft: true` for new posts.

### 3. Add Cover Image (Optional)
Place your cover image in `/src/assets/images/content/my-new-post/` and reference it in frontmatter.

### 4. Write Content
Add your MDX content, including any image components as needed.

### 5. Add Embedded Content Sections (Optional)
- Create Markdown files in `embedded/` directory for long-form sections
- Import them into your MDX file using `import { Content } from './embedded/file.md'`
- Display using the MDContent component for styled sections
- Useful for breaking up very long posts or including AI-generated content

### 6. Add AI Conversation Transcripts (Optional)
- Convert AI chat exports to TypeScript files in `transcripts/` directory
- Use the convert-chat-transcript.py script to convert exports
- Import and display using the ChatTranscript component
- See `.cursor/rules/using-chat-transcript-component.mdc` for detailed instructions

### 7. Create Social Content (Optional)
- Write LinkedIn post in `socialposts/linkedin/post.txt`
- Write Mastodon post in `socialposts/mastodon/post.txt`
- Add any social-specific images to `socialposts/images/`

**Note**: 
- The `socialposts/` directory is for content planning only and will NOT be published
- The `transcripts/` directory contains TypeScript files that can be imported into your MDX
- The `embedded/` directory contains Markdown files that can be imported and rendered within your post

## Common Patterns

### Blog Post with Cover Image
```mdx
---
title: "My Awesome Post"
contentType: "essay"
description: "Learn about this amazing topic"
author: "Jack Ivers"
publishDate: "2025-08-11T10:00:00-05:00"
image: "~/assets/images/content/my-awesome-post/cover.png"
featured: false
draft: true  # ALWAYS start with draft: true
tags: ["technology", "ai"]
---

import SingleImage from '~/components/ui/SingleImage.astro';

Content starts here...

<SingleImage src="detail.png" alt="Detailed view" size="2xl" postDir="my-awesome-post" />

More content...
```

### Brief with Multiple Images
```mdx
---
title: "Quick Update"
contentType: "brief"
# ... other frontmatter
---

import ImageGallery from '~/components/ui/ImageGallery.astro';

Quick intro text...

<ImageGallery 
  images={["screenshot1.png", "screenshot2.png", "screenshot3.png"]} 
  postDir="quick-update" 
  size="lg" 
/>
```

### Essay with Embedded Content Sections
```mdx
---
title: "Comprehensive Analysis"
contentType: "essay"
# ... other frontmatter
---

import SingleImage from '~/components/ui/SingleImage.astro';
import MDContent from '~/components/ui/MDContent.astro';
import { Content as TechnicalDetails } from './embedded/technical-details.md';
import { Content as CaseStudy } from './embedded/case-study.md';

Introduction paragraph explaining the topic...

<SingleImage src="overview.png" alt="Topic overview" size="2xl" postDir="comprehensive-analysis" />

Some bridging content between sections...

<MDContent 
  title="Technical Deep Dive" 
  Content={TechnicalDetails}
  description="Detailed technical analysis and implementation details"
/>

More content discussing the technical aspects...

<MDContent 
  title="Real-World Case Study" 
  Content={CaseStudy}
  description="How this technology was applied in production"
/>

Conclusion and key takeaways...
```

## Troubleshooting

### Images Not Showing
- Check image is in correct directory: `/src/assets/images/content/[slug]/`
- Verify `postDir` parameter matches slug exactly
- Ensure image filename matches reference exactly (case-sensitive)

### Build Errors
- Validate frontmatter YAML syntax
- Check all imported components exist
- Ensure JSX syntax is valid
- Verify date format is correct

### Links Not Working
- Internal links should start with `/`
- Test all links with dev server running
- Check for typos in slugs

**Remember**: Always test your content with `npm run dev` at http://localhost:4321 before marking as `draft: false`