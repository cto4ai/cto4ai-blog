---
description: "Complete guide for authoring MDX content in the CTO4.AI Astro blog including frontmatter, images, components, and linking best practices."
globs: ["*.mdx", "*.md"]
alwaysApply: false
---

# MDX Content Authoring for CTO4.AI Astro Blog

**Task**: Create and edit MDX content for the CTO4.AI blog with proper structure, images, and formatting.

## Content File Structure

### File Location
- **Content Path**: `/src/data/content/[slug]/index.mdx`
- **Slug Format**: URL-friendly (lowercase, hyphens, no spaces)
- **Example**: `/src/data/content/my-awesome-post/index.mdx`

### Image Storage
- **Image Path**: `/src/assets/images/content/[slug]/`
- **Must match post slug**: Images for `my-awesome-post` go in `/src/assets/images/content/my-awesome-post/`
- **Supported formats**: `.png`, `.jpg`, `.jpeg`, `.webp`, `.svg`

## Required Frontmatter

```yaml
---
title: "Your Post Title Here"
contentType: "essay"  # Options: essay, brief, elsewhere, quote, episodes
description: "Brief description for SEO and social sharing"
author: "Jack Ivers"
publishDate: "2025-08-11T10:00:00-05:00"  # ISO 8601 with timezone
image: "~/assets/images/content/[slug]/cover-image.png"  # Cover image path (optional)
featured: false  # Featured on homepage
draft: true  # Set to false when publishing
tags: ["tag1", "tag2"]  # Optional
categories: ["category1"]  # Optional
---
```

### Content Type Options
- `essay`: Long-form articles (1000+ words)
- `brief`: Short-form content (under 1000 words)
- `elsewhere`: Curated external content with commentary
- `quote`: Quote posts with attribution
- `episodes`: Podcast or video reviews

### Date Format
- Use ISO 8601: `YYYY-MM-DDTHH:MM:SS-ZZ:ZZ`
- Example: `2025-08-11T14:30:00-05:00` (Central Time)
- Always include timezone offset

## Image Components

### Import Required Components
Place at the top of your MDX file after frontmatter:

```jsx
import SingleImage from '~/components/ui/SingleImage.astro';
import ImageGallery from '~/components/ui/ImageGallery.astro';
```

### SingleImage Usage
For individual images with lightbox support:

```jsx
<SingleImage 
  src="image-filename.png" 
  alt="Descriptive alt text for accessibility" 
  size="2xl" 
  postDir="your-post-slug" 
/>
```

**Size Options**: `xs`, `sm`, `md`, `lg`, `xl`, `2xl`, `3xl`, `4xl`, `5xl`, `6xl`, `full`

### ImageGallery Usage
For multiple images in a grid:

```jsx
<ImageGallery 
  images={["image1.png", "image2.jpg", "image3.webp"]} 
  postDir="your-post-slug" 
  size="xl" 
/>
```

## Hyperlinking

### External Links
Standard markdown syntax:
```markdown
[Link Text](https://example.com)
```

### Internal Blog Links
Use relative paths:
```markdown
[My other post](/p/other-post-slug)
[Posts by tag](/tag/ai)
[Posts by category](/category/technology)
```

### Footnotes
MDX supports footnotes:
```markdown
This needs a citation[^1].

[^1]: This is the footnote content.
```

## MDX-Specific Features

### Component Imports
You can import and use React/Astro components:
```jsx
import CustomComponent from '~/components/CustomComponent.astro';

<CustomComponent prop="value" />
```

### Inline JSX
You can use JSX directly in MDX:
```jsx
<div className="custom-class">
  Custom HTML content
</div>
```

## Best Practices

### Named Entity Linking
- Link first appearance only (don't repeat links to same entity)
- Focus on non-obvious terms that need context
- Use authoritative sources (official sites, Wikipedia, documentation)
- Verify links work before publishing

### Images
- **Always provide alt text** for accessibility
- Use descriptive filenames (not IMG_1234.jpg)
- Optimize images before upload (compress, appropriate dimensions)
- Cover image should be 1200x628px minimum for social sharing
- Use `postDir` parameter matching your post's slug

### Content Organization
- Start with compelling introduction
- Use headers (##, ###) for structure
- Break up long text with images, lists, or quotes
- End with clear conclusion or call-to-action

### SEO & Discoverability
- Write descriptive titles (60 chars or less ideal)
- Create compelling descriptions (155 chars or less)
- Use relevant tags (3-5 per post)
- Choose appropriate category (usually just one)

### Draft Management
- Set `draft: true` while writing
- Test with `npm run dev` before publishing
- Change to `draft: false` only when ready to publish
- Remember drafts won't appear in production builds

## Steps to Create a New Post

### 1. Create Directory Structure
For a new post with slug `my-new-post`:

```bash
# Create content directory and file
mkdir -p src/data/content/my-new-post
touch src/data/content/my-new-post/index.mdx

# Create parallel images directory
mkdir -p src/assets/images/content/my-new-post

# Create social media scaffolding (for social content planning)
mkdir -p src/data/content/my-new-post/socialposts/images
mkdir -p src/data/content/my-new-post/socialposts/linkedin
mkdir -p src/data/content/my-new-post/socialposts/mastodon
touch src/data/content/my-new-post/socialposts/linkedin/post.txt
touch src/data/content/my-new-post/socialposts/mastodon/post.txt
```

### 2. Add Frontmatter to index.mdx
Start with the required frontmatter template (see Required Frontmatter section above).
**IMPORTANT**: Always set `draft: true` for new posts.

### 3. Add Cover Image (Optional)
Place your cover image in `/src/assets/images/content/my-new-post/` and reference it in frontmatter.

### 4. Write Content
Add your MDX content, including any image components as needed.

### 5. Create Social Content (Optional)
- Write LinkedIn post in `socialposts/linkedin/post.txt`
- Write Mastodon post in `socialposts/mastodon/post.txt`
- Add any social-specific images to `socialposts/images/`

**Note**: The `socialposts/` directory is for your content planning only and will NOT be published or exposed during the Astro build process.

## Common Patterns

### Blog Post with Cover Image
```mdx
---
title: "My Awesome Post"
contentType: "essay"
description: "Learn about this amazing topic"
author: "Jack Ivers"
publishDate: "2025-08-11T10:00:00-05:00"
image: "~/assets/images/content/my-awesome-post/cover.png"
featured: false
draft: true  # ALWAYS start with draft: true
tags: ["technology", "ai"]
---

import SingleImage from '~/components/ui/SingleImage.astro';

Content starts here...

<SingleImage src="detail.png" alt="Detailed view" size="2xl" postDir="my-awesome-post" />

More content...
```

### Brief with Multiple Images
```mdx
---
title: "Quick Update"
contentType: "brief"
# ... other frontmatter
---

import ImageGallery from '~/components/ui/ImageGallery.astro';

Quick intro text...

<ImageGallery 
  images={["screenshot1.png", "screenshot2.png", "screenshot3.png"]} 
  postDir="quick-update" 
  size="lg" 
/>
```

## Troubleshooting

### Images Not Showing
- Check image is in correct directory: `/src/assets/images/content/[slug]/`
- Verify `postDir` parameter matches slug exactly
- Ensure image filename matches reference exactly (case-sensitive)

### Build Errors
- Validate frontmatter YAML syntax
- Check all imported components exist
- Ensure JSX syntax is valid
- Verify date format is correct

### Links Not Working
- Internal links should start with `/`
- Test all links with dev server running
- Check for typos in slugs

**Remember**: Always test your content with `npm run dev` at http://localhost:4321 before marking as `draft: false`